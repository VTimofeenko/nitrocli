image: archlinux
packages:
  - rust
  - libnitrokey
environment:
  USE_SYSTEM_LIBNITROKEY: "1"
sources:
  - https://git.ireas.org/nitrokey-rs
tasks:
  - build: |
      cd nitrokey-rs
      cargo build --release
  - test: |
      cd nitrokey-rs
      cargo test
  - format: |
      cd nitrokey-rs
      cargo fmt -- --check
