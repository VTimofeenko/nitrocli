# Copyright (C) 2019 Robin Krahl <robin.krahl@ireas.org>
# SPDX-License-Identifier: CC0-1.0
image: archlinux
packages:
  - rust
  - libnitrokey
environment:
  USE_SYSTEM_LIBNITROKEY: "1"
sources:
  - https://git.ireas.org/nitrokey-rs
tasks:
  - version: |
      rustc -V
  - build: |
      cd nitrokey-rs
      cargo build --release
  - test: |
      cd nitrokey-rs
      cargo test
  - format: |
      cd nitrokey-rs
      cargo fmt -- --check
  - clippy: |
      cd nitrokey-rs
      cargo clippy -- -D warnings
