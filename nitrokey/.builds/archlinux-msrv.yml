# Copyright (C) 2019 Robin Krahl <robin.krahl@ireas.org>
# SPDX-License-Identifier: CC0-1.0
image: archlinux
packages:
  - rustup
  - libnitrokey
environment:
  USE_SYSTEM_LIBNITROKEY: "1"
sources:
  - https://git.ireas.org/nitrokey-rs
tasks:
  - setup: |
      rustup set profile minimal
      rustup default 1.34.2
  - version: |
      rustc -V
  - build: |
      cd nitrokey-rs
      cargo build --release
  - test: |
      cd nitrokey-rs
      cargo test
